<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>bloxbox</title>
    <style>
      body {
        font-family: Inter, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background: var(--bg);
        color: var(--c);
        user-select: none;
      }
      main {
        display: flex;
        align-items: center;
        gap: 4px;
      }
      h1 {
        font-weight: 400;
        letter-spacing: -0.02em;
        padding-left: 32px;
        position: relative;
        animation: float 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        will-change: transform;
        backface-visibility: hidden;
      }
      h1::before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translate3d(0, -50%, 0);
        width: 28px;
        height: 28px;
        background: var(--b);
        animation: impatient 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;
        will-change: transform, opacity;
        backface-visibility: hidden;
      }
      @keyframes impatient {
        0% {
          transform: translate3d(0, -50%, 0) scale3d(1, 1, 1)
            rotate3d(0, 0, 1, 0deg);
          opacity: 1;
        }
        15% {
          transform: translate3d(-1px, -52%, 0) scale3d(1.15, 0.95, 1)
            rotate3d(0, 0, 1, -2deg);
          opacity: 0.9;
        }
        30% {
          transform: translate3d(1px, -48%, 0) scale3d(0.95, 1.15, 1)
            rotate3d(0, 0, 1, 2deg);
          opacity: 0.85;
        }
        45% {
          transform: translate3d(0, -50%, 0) scale3d(1.2, 1.2, 1)
            rotate3d(0, 0, 1, 0deg);
          opacity: 0.75;
        }
        60% {
          transform: translate3d(1px, -51%, 0) scale3d(1.05, 1.1, 1)
            rotate3d(0, 0, 1, -1.5deg);
          opacity: 0.9;
        }
        75% {
          transform: translate3d(-1px, -49%, 0) scale3d(1.1, 1.05, 1)
            rotate3d(0, 0, 1, 1.5deg);
          opacity: 0.88;
        }
        100% {
          transform: translate3d(0, -50%, 0) scale3d(1, 1, 1)
            rotate3d(0, 0, 1, 0deg);
          opacity: 1;
        }
      }
      @keyframes float {
        0%,
        100% {
          transform: translate3d(0, 0, 0);
        }
        50% {
          transform: translate3d(0, -4px, 0);
        }
      }
      #canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
      }
      main {
        position: relative;
        z-index: 2;
      }
      body {
        cursor: crosshair;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>
    <main><h1>bloxbox</h1></main>
    <script>
      const schemes = [
        { bg: "#fff", c: "#000", b: "#050ff5" },
        { bg: "#000", c: "#fff", b: "#050ff5" },
        { bg: "#050ff5", c: "#fff", b: "#000" },
      ];
      const d = document.documentElement.style;
      const lastTheme = localStorage.getItem("lastTheme");
      const availableSchemes = lastTheme
        ? schemes.filter((s) => `${s.bg}-${s.c}-${s.b}` !== lastTheme)
        : schemes;
      const scheme =
        availableSchemes[~~(Math.random() * availableSchemes.length)];
      d.setProperty("--bg", scheme.bg);
      d.setProperty("--c", scheme.c);
      d.setProperty("--b", scheme.b);
      localStorage.setItem("lastTheme", `${scheme.bg}-${scheme.c}-${scheme.b}`);

      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resizeCanvas();
      window.addEventListener("resize", resizeCanvas);

      function getSquareColor() {
        return getComputedStyle(document.documentElement)
          .getPropertyValue("--c")
          .trim();
      }

      function startDrawing(e) {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        lastX = (e.clientX || e.touches[0].clientX) - rect.left;
        lastY = (e.clientY || e.touches[0].clientY) - rect.top;
      }

      function draw(e) {
        if (!isDrawing) return;
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        const currentX = (e.clientX || e.touches[0].clientX) - rect.left;
        const currentY = (e.clientY || e.touches[0].clientY) - rect.top;

        ctx.strokeStyle = getSquareColor();
        ctx.lineWidth = 3;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(currentX, currentY);
        ctx.stroke();

        lastX = currentX;
        lastY = currentY;
      }

      function stopDrawing() {
        isDrawing = false;
      }

      canvas.addEventListener("mousedown", startDrawing);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", stopDrawing);
      canvas.addEventListener("mouseout", stopDrawing);

      canvas.addEventListener("touchstart", startDrawing);
      canvas.addEventListener("touchmove", draw);
      canvas.addEventListener("touchend", stopDrawing);

      canvas.style.pointerEvents = "auto";
    </script>
  </body>
</html>
